import { Router } from "express";
import authorize from "../middleware/auth.middleware.js";
import { createNewApplication, deleteApplication, getAllApplicationsByUserId, getApplicationById, updateApplication } from "../controllers/application.controller.js";
import { applicationValidation } from "../middleware/validation/application.validation.js";
import { uploadResume } from "../utils/multer.js";
const applicationRouter = Router();
applicationRouter.use(authorize);
applicationRouter.get('/users/:userId', getAllApplicationsByUserId);
applicationRouter.get('/:id', applicationValidation.getById, getApplicationById);
applicationRouter.post('/jobs/:jobId', uploadResume.single('resume'), applicationValidation.create, createNewApplication);
applicationRouter.put('/:id', uploadResume.single('resume'), applicationValidation.update, updateApplication);
applicationRouter.delete('/:id', applicationValidation.delete, deleteApplication);
export default applicationRouter;
